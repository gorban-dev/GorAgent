# üìö Document Indexer ‚Äî –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## –û–ø–∏—Å–∞–Ω–∏–µ

Document Indexer ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ —á–µ—Ä–µ–∑ OpenAI API. –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∞–ª–∏–∑—É–µ—Ç:

- **–†–∞–∑–±–∏–≤–∫—É —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —á–∞–Ω–∫–∏** —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º —Ä–∞–∑–º–µ—Ä–æ–º –∏ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ–º
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—é —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞–Ω–∫–∞ —á–µ—Ä–µ–∑ OpenAI Embeddings API
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞** –≤ JSON —Ñ–∞–π–ª –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫** –ø–æ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–æ—Ü–µ—Å—Å–∞** —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Document Indexer                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                               ‚îÇ
‚îÇ  1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤                                      ‚îÇ
‚îÇ     ‚îî‚îÄ> –¢–µ–∫—Å—Ç, Markdown, JSON, PDF ‚Üí —Ç–µ–∫—Å—Ç                  ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  2. –ß–∞–Ω–∫–∏–Ω–≥ (—Ä–∞–∑–±–∏–≤–∫–∞ –Ω–∞ –∫—É—Å–∫–∏)                             ‚îÇ
‚îÇ     ‚îú‚îÄ> –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞: 500 —Ç–æ–∫–µ–Ω–æ–≤ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ)           ‚îÇ
‚îÇ     ‚îî‚îÄ> –ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ: 50 —Ç–æ–∫–µ–Ω–æ–≤ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ)              ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤                                   ‚îÇ
‚îÇ     ‚îú‚îÄ> –ú–æ–¥–µ–ª—å: text-embedding-3-small (OpenAI)            ‚îÇ
‚îÇ     ‚îú‚îÄ> –†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å: 1536                                    ‚îÇ
‚îÇ     ‚îî‚îÄ> Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏                        ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞                                       ‚îÇ
‚îÇ     ‚îú‚îÄ> –§–æ—Ä–º–∞—Ç: JSON                                         ‚îÇ
‚îÇ     ‚îú‚îÄ> –°–æ–¥–µ—Ä–∂–∏—Ç: –¥–æ–∫—É–º–µ–Ω—Ç—ã + —á–∞–Ω–∫–∏ + —ç–º–±–µ–¥–¥–∏–Ω–≥–∏           ‚îÇ
‚îÇ     ‚îî‚îÄ> –ü—É—Ç—å: ./document-index.json                         ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  5. –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫                                      ‚îÇ
‚îÇ     ‚îú‚îÄ> –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–∞ –∑–∞–ø—Ä–æ—Å–∞                        ‚îÇ
‚îÇ     ‚îú‚îÄ> –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–≥–æ —Å—Ö–æ–¥—Å—Ç–≤–∞                     ‚îÇ
‚îÇ     ‚îî‚îÄ> –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤                            ‚îÇ
‚îÇ                                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ .env –µ—Å—Ç—å OPENAI_API_KEY
npm start
```

### 2. –û—Ç–∫—Ä—ã—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:3000/document-index-demo

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–∞–Ω–∫–∏–Ω–≥–∞
- **–†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞**: 500 —Ç–æ–∫–µ–Ω–æ–≤ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 300-1000)
- **–ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ**: 50 —Ç–æ–∫–µ–Ω–æ–≤ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 10-100)

#### –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **–í–∞—Ä–∏–∞–Ω—Ç –ê**: –í—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –≤ –ø–æ–ª–µ –∏ —É–∫–∞–∂–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
- **–í–∞—Ä–∏–∞–Ω—Ç –ë**: –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã (.txt, .md, .json)
- **–í–∞—Ä–∏–∞–Ω—Ç –í**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã"

#### –®–∞–≥ 3: –û–±—Ä–∞–±–æ—Ç–∫–∞
- –ù–∞–∂–º–∏—Ç–µ "üöÄ –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç"
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –≤ –ª–æ–≥–∞—Ö
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
  - –†–∞–∑–æ–±—å–µ—Ç —Ç–µ–∫—Å—Ç –Ω–∞ —á–∞–Ω–∫–∏
  - –°–æ–∑–¥–∞—Å—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞–Ω–∫–∞
  - –î–æ–±–∞–≤–∏—Ç –¥–æ–∫—É–º–µ–Ω—Ç –≤ –∏–Ω–¥–µ–∫—Å

#### –®–∞–≥ 4: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞
- –ù–∞–∂–º–∏—Ç–µ "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–Ω–¥–µ–∫—Å"
- –ò–Ω–¥–µ–∫—Å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ñ–∞–π–ª `document-index.json`

#### –®–∞–≥ 5: –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
- –í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –≤ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞
- –£–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (1-20)
- –ù–∞–∂–º–∏—Ç–µ "üîç –ò—Å–∫–∞—Ç—å"
- –ü–æ–ª—É—á–∏—Ç–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞–Ω–∫–∏ —Å –æ—Ü–µ–Ω–∫–æ–π —Å—Ö–æ–¥—Å—Ç–≤–∞

## API Endpoints

### POST `/api/document-indexer/process`
–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (—á–∞–Ω–∫–∏–Ω–≥ + —ç–º–±–µ–¥–¥–∏–Ω–≥–∏)

**Request:**
```json
{
  "content": "–¢–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞...",
  "metadata": {
    "name": "document.md",
    "type": "markdown"
  },
  "options": {
    "chunkSize": 500,
    "chunkOverlap": 50
  }
}
```

**Response:**
```json
{
  "success": true,
  "document": {
    "id": "doc_123456",
    "name": "document.md",
    "chunksCount": 10,
    "totalTokens": 1500
  },
  "chunks": [...],
  "totalTokens": 1500
}
```

### GET `/api/document-indexer/stats`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–Ω–¥–µ–∫—Å–∞

**Response:**
```json
{
  "totalDocuments": 5,
  "totalChunks": 42,
  "model": "text-embedding-3-small",
  "chunkSize": 500,
  "chunkOverlap": 50,
  "indexSize": 258048,
  "avgChunkSize": 450
}
```

### GET `/api/document-indexer/documents`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**Response:**
```json
{
  "documents": [
    {
      "id": "doc_123",
      "name": "document.md",
      "chunksCount": 10,
      "totalTokens": 1500,
      "processedAt": "2025-12-23T10:30:00.000Z"
    }
  ]
}
```

### GET `/api/document-indexer/documents/:documentId/chunks`
–ü–æ–ª—É—á–µ–Ω–∏–µ —á–∞–Ω–∫–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞

**Response:**
```json
{
  "chunks": [
    {
      "id": "chunk_123_0",
      "text": "–¢–µ–∫—Å—Ç —á–∞–Ω–∫–∞...",
      "tokens": 450,
      "position": 0,
      "embedding": [0.1, 0.2, ...],
      "metadata": {
        "documentId": "doc_123",
        "documentName": "document.md"
      }
    }
  ]
}
```

### POST `/api/document-indexer/search`
–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –∏–Ω–¥–µ–∫—Å—É

**Request:**
```json
{
  "query": "–º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ",
  "topK": 5
}
```

**Response:**
```json
{
  "query": "–º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ",
  "results": [
    {
      "chunk": {
        "id": "chunk_123_0",
        "text": "–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ ‚Äî —ç—Ç–æ...",
        "metadata": {...}
      },
      "similarity": 0.89
    }
  ],
  "tokensUsed": 10
}
```

### POST `/api/document-indexer/save`
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –≤ —Ñ–∞–π–ª

**Response:**
```json
{
  "success": true,
  "path": "./document-index.json",
  "size": 258048,
  "documents": 5,
  "chunks": 42
}
```

### POST `/api/document-indexer/load`
–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω–¥–µ–∫—Å–∞ –∏–∑ —Ñ–∞–π–ª–∞

**Response:**
```json
{
  "success": true,
  "path": "./document-index.json",
  "documents": 5,
  "chunks": 42
}
```

### GET `/api/document-indexer/export`
–≠–∫—Å–ø–æ—Ä—Ç –∏–Ω–¥–µ–∫—Å–∞ –≤ JSON (–¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è)

**Response:** –ü–æ–ª–Ω—ã–π –∏–Ω–¥–µ–∫—Å –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ

### POST `/api/document-indexer/clear`
–û—á–∏—Å—Ç–∫–∞ –∏–Ω–¥–µ–∫—Å–∞

**Response:**
```json
{
  "success": true
}
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–¥

### JavaScript/Node.js

```javascript
// –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
const response = await fetch('http://localhost:3000/api/document-indexer/process', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    content: '–¢–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞...',
    metadata: { name: 'document.md', type: 'markdown' },
    options: { chunkSize: 500, chunkOverlap: 50 }
  })
});

const result = await response.json();
console.log(`–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: ${result.chunks.length} —á–∞–Ω–∫–æ–≤`);

// –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
const searchResponse = await fetch('http://localhost:3000/api/document-indexer/search', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    query: '–º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ',
    topK: 5
  })
});

const searchResult = await searchResponse.json();
console.log('–ù–∞–π–¥–µ–Ω–æ:', searchResult.results.length, '—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤');
```

### Python

```python
import requests

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
response = requests.post('http://localhost:3000/api/document-indexer/process', json={
    'content': '–¢–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞...',
    'metadata': {'name': 'document.md', 'type': 'markdown'},
    'options': {'chunkSize': 500, 'chunkOverlap': 50}
})

result = response.json()
print(f"–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {len(result['chunks'])} —á–∞–Ω–∫–æ–≤")

# –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
search_response = requests.post('http://localhost:3000/api/document-indexer/search', json={
    'query': '–º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ',
    'topK': 5
})

search_result = search_response.json()
print(f"–ù–∞–π–¥–µ–Ω–æ: {len(search_result['results'])} —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤")
```

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∞–Ω–∫–∏–Ω–≥–∞

### –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞ (chunkSize)

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ —á–∞–Ω–∫–∞ –≤ —Ç–æ–∫–µ–Ω–∞—Ö.

- **–ú–∞–ª–µ–Ω—å–∫–∏–µ —á–∞–Ω–∫–∏ (200-300 —Ç–æ–∫–µ–Ω–æ–≤)**
  - ‚úÖ –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π –ø–æ–∏—Å–∫
  - ‚úÖ –õ—É—á—à–µ –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
  - ‚ùå –ë–æ–ª—å—à–µ —á–∞–Ω–∫–æ–≤ ‚Üí –±–æ–ª—å—à–µ API –≤—ã–∑–æ–≤–æ–≤
  - ‚ùå –ú–æ–∂–µ—Ç —Ç–µ—Ä—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç

- **–°—Ä–µ–¥–Ω–∏–µ —á–∞–Ω–∫–∏ (400-600 —Ç–æ–∫–µ–Ω–æ–≤)**
  - ‚úÖ –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Ç–æ—á–Ω–æ—Å—Ç—å—é –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
  - ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤
  - ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å

- **–ë–æ–ª—å—à–∏–µ —á–∞–Ω–∫–∏ (800-1000 —Ç–æ–∫–µ–Ω–æ–≤)**
  - ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –±–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
  - ‚úÖ –ú–µ–Ω—å—à–µ API –≤—ã–∑–æ–≤–æ–≤
  - ‚ùå –ú–µ–Ω–µ–µ —Ç–æ—á–Ω—ã–π –ø–æ–∏—Å–∫
  - ‚ùå –ú–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ—Å–≤—è–∑–∞–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

### –ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ (chunkOverlap)

–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è –º–µ–∂–¥—É —Å–æ—Å–µ–¥–Ω–∏–º–∏ —á–∞–Ω–∫–∞–º–∏.

- **–ë–µ–∑ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è (0 —Ç–æ–∫–µ–Ω–æ–≤)**
  - ‚ùå –ú–æ–∂–µ—Ç —Ä–∞–∑–æ—Ä–≤–∞—Ç—å –≤–∞–∂–Ω—ã–µ —Ñ—Ä–∞–∑—ã
  - ‚ùå –ü–æ—Ç–µ—Ä—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö

- **–ú–∞–ª–æ–µ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ (20-50 —Ç–æ–∫–µ–Ω–æ–≤)**
  - ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
  - ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–≤—è–∑–Ω–æ—Å—Ç—å
  - ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤

- **–ë–æ–ª—å—à–æ–µ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ (100-200 —Ç–æ–∫–µ–Ω–æ–≤)**
  - ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–≤—è–∑–Ω–æ—Å—Ç—å
  - ‚ùå –ë–æ–ª—å—à–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
  - ‚ùå –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –∏–Ω–¥–µ–∫—Å–∞

## –°—Ç–æ–∏–º–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### OpenAI Embeddings API

–ú–æ–¥–µ–ª—å: `text-embedding-3-small`
- –¶–µ–Ω–∞: **$0.02 / 1M —Ç–æ–∫–µ–Ω–æ–≤**
- –†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å: 1536

#### –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á–µ—Ç–∞

**–ü—Ä–∏–º–µ—Ä 1: README —Ñ–∞–π–ª (5000 —Å–ª–æ–≤ ‚âà 7000 —Ç–æ–∫–µ–Ω–æ–≤)**
- –ß–∞–Ω–∫–∏–Ω–≥: 500 —Ç–æ–∫–µ–Ω–æ–≤/—á–∞–Ω–∫ ‚Üí ~14 —á–∞–Ω–∫–æ–≤
- –°—Ç–æ–∏–º–æ—Å—Ç—å: 7000 * $0.02 / 1,000,000 = **$0.00014** (~0.01 —Ü–µ–Ω—Ç–∞)

**–ü—Ä–∏–º–µ—Ä 2: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (50,000 —Å–ª–æ–≤ ‚âà 70,000 —Ç–æ–∫–µ–Ω–æ–≤)**
- –ß–∞–Ω–∫–∏–Ω–≥: 500 —Ç–æ–∫–µ–Ω–æ–≤/—á–∞–Ω–∫ ‚Üí ~140 —á–∞–Ω–∫–æ–≤
- –°—Ç–æ–∏–º–æ—Å—Ç—å: 70,000 * $0.02 / 1,000,000 = **$0.0014** (~0.14 —Ü–µ–Ω—Ç–∞)

**–ü—Ä–∏–º–µ—Ä 3: –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π (500,000 —Å–ª–æ–≤ ‚âà 700,000 —Ç–æ–∫–µ–Ω–æ–≤)**
- –ß–∞–Ω–∫–∏–Ω–≥: 500 —Ç–æ–∫–µ–Ω–æ–≤/—á–∞–Ω–∫ ‚Üí ~1400 —á–∞–Ω–∫–æ–≤
- –°—Ç–æ–∏–º–æ—Å—Ç—å: 700,000 * $0.02 / 1,000,000 = **$0.014** (~1.4 —Ü–µ–Ω—Ç–∞)

**–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫:**
- –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å: ~10-50 —Ç–æ–∫–µ–Ω–æ–≤
- –°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞: ~$0.000001 (0.0001 —Ü–µ–Ω—Ç–∞)

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- –≠–º–±–µ–¥–¥–∏–Ω–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∏–Ω–¥–µ–∫—Å
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è
- –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ API –∑–∞–ø—Ä–æ—Å–æ–≤

### 2. Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–¥–µ—Ä–∂–∫–∏
- –ò–∑–±–µ–≥–∞–µ—Ç rate limit –æ—à–∏–±–æ–∫
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞: 100ms –º–µ–∂–¥—É —á–∞–Ω–∫–∞–º–∏

### 3. –†–∞–∑–º–µ—Ä –∏–Ω–¥–µ–∫—Å–∞
```
–ü—Ä–∏–º–µ—Ä–Ω—ã–π —Ä–∞–∑–º–µ—Ä:
- 1 —ç–º–±–µ–¥–¥–∏–Ω–≥ = 1536 float32 = ~6 KB
- 100 —á–∞–Ω–∫–æ–≤ = ~600 KB
- 1000 —á–∞–Ω–∫–æ–≤ = ~6 MB
```

### 4. –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞
- –õ–∏–Ω–µ–π–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: O(n)
- 100 —á–∞–Ω–∫–æ–≤: ~10ms
- 1000 —á–∞–Ω–∫–æ–≤: ~100ms
- 10000 —á–∞–Ω–∫–æ–≤: ~1s

–î–ª—è –±–æ–ª—å—à–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ (>10000 —á–∞–Ω–∫–æ–≤) —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (Pinecone, Weaviate, Qdrant).

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –≤—Å–µ—Ö .md —Ñ–∞–π–ª–æ–≤
find ./docs -name "*.md" | while read file; do
  curl -X POST http://localhost:3000/api/document-indexer/process \
    -H "Content-Type: application/json" \
    -d "{
      \"content\": \"$(cat $file)\",
      \"metadata\": {
        \"name\": \"$(basename $file)\",
        \"path\": \"$file\",
        \"type\": \"markdown\"
      }
    }"
done

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–Ω–¥–µ–∫—Å
curl -X POST http://localhost:3000/api/document-indexer/save
```

### 2. –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

```javascript
async function searchDocs(query) {
  const response = await fetch('http://localhost:3000/api/document-indexer/search', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ query, topK: 3 })
  });
  
  const { results } = await response.json();
  
  results.forEach((result, i) => {
    console.log(`\n${i + 1}. –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: ${(result.similarity * 100).toFixed(1)}%`);
    console.log(`   –î–æ–∫—É–º–µ–Ω—Ç: ${result.chunk.metadata.documentName}`);
    console.log(`   –¢–µ–∫—Å—Ç: ${result.chunk.text.substring(0, 200)}...`);
  });
}

searchDocs('–∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å API –∫–ª—é—á');
```

### 3. RAG (Retrieval-Augmented Generation)

```javascript
async function answerQuestion(question) {
  // 1. –ù–∞–π—Ç–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞–Ω–∫–∏
  const searchResponse = await fetch('http://localhost:3000/api/document-indexer/search', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ query: question, topK: 3 })
  });
  
  const { results } = await searchResponse.json();
  
  // 2. –°–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤
  const context = results.map(r => r.chunk.text).join('\n\n');
  
  // 3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å + –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ LLM
  const chatResponse = await fetch('http://localhost:3000/api/chat', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      message: `–ö–æ–Ω—Ç–µ–∫—Å—Ç:\n${context}\n\n–í–æ–ø—Ä–æ—Å: ${question}`,
      systemPrompt: '–û—Ç–≤–µ—á–∞–π –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.'
    })
  });
  
  const { answer } = await chatResponse.json();
  return answer;
}

answerQuestion('–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏?').then(console.log);
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–Ω–¥–µ–∫—Å–∞

–ò–Ω–¥–µ–∫—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON:

```json
{
  "documents": [
    {
      "id": "doc_123456",
      "name": "ML-Introduction.md",
      "type": "markdown",
      "metadata": {...},
      "chunksCount": 10,
      "totalTokens": 1500,
      "processedAt": "2025-12-23T10:30:00.000Z"
    }
  ],
  "chunks": [
    {
      "id": "chunk_123456_0",
      "text": "–¢–µ–∫—Å—Ç —á–∞–Ω–∫–∞...",
      "tokens": 450,
      "position": 0,
      "startWord": 0,
      "endWord": 150,
      "embedding": [0.1, 0.2, 0.3, ...], // 1536 –∑–Ω–∞—á–µ–Ω–∏–π
      "embeddingModel": "text-embedding-3-small",
      "tokensUsed": 450,
      "metadata": {
        "documentId": "doc_123456",
        "documentName": "ML-Introduction.md"
      }
    }
  ],
  "metadata": {
    "model": "text-embedding-3-small",
    "chunkSize": 500,
    "chunkOverlap": 50,
    "created": "2025-12-23T10:00:00.000Z",
    "updated": "2025-12-23T10:30:00.000Z",
    "totalDocuments": 5,
    "totalChunks": 42
  }
}
```

## Troubleshooting

### –û—à–∏–±–∫–∞: "OpenAI API key –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ —Ñ–∞–π–ª–µ `.env` –µ—Å—Ç—å `OPENAI_API_KEY`

### –û—à–∏–±–∫–∞: Rate limit exceeded
**–†–µ—à–µ–Ω–∏–µ:** –£–º–µ–Ω—å—à–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ —É–≤–µ–ª–∏—á—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫—É –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏

### –ü–æ–∏—Å–∫ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –ò–Ω–¥–µ–∫—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã (`/api/document-indexer/stats`)
2. –ß–∞–Ω–∫–∏ –∏–º–µ—é—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ (–Ω–µ null)
3. –ó–∞–ø—Ä–æ—Å –Ω–µ –ø—É—Å—Ç–æ–π

### –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä –∏–Ω–¥–µ–∫—Å–∞
**–†–µ—à–µ–Ω–∏–µ:**
- –£–≤–µ–ª–∏—á—å—Ç–µ —Ä–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞ (–º–µ–Ω—å—à–µ —á–∞–Ω–∫–æ–≤)
- –£–º–µ–Ω—å—à–∏—Ç–µ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–µ–∫—Ç–æ—Ä–Ω—É—é –ë–î –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è

## Roadmap

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ PDF —Ñ–∞–π–ª–æ–≤
- [ ] Batch API –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ (–¥–µ—à–µ–≤–ª–µ –∏ –±—ã—Å—Ç—Ä–µ–µ)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–µ–∫—Ç–æ—Ä–Ω—ã–º–∏ –ë–î (Pinecone, Qdrant)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö –º–æ–¥–µ–ª–µ–π —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- [ ] –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è
- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º –ø—Ä–∏ –ø–æ–∏—Å–∫–µ
- [ ] –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ (keyword + semantic)
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [OpenAI Embeddings Guide](https://platform.openai.com/docs/guides/embeddings)
- [OpenAI Embeddings API](https://platform.openai.com/docs/api-reference/embeddings)
- [Cosine Similarity](https://en.wikipedia.org/wiki/Cosine_similarity)
- [RAG (Retrieval-Augmented Generation)](https://arxiv.org/abs/2005.11401)

---

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è GorAgent** ü§ñ



